<html lang="ko" dir="ltr">
<head>
  <title>ì•ˆë…•í•˜ì„¸ìš” - ë¸”ë¼ì¸ë“œ ë ˆí„°</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <link rel="manifest" href="../manifest.json">
  <meta property="og:title" content="ë¸”ë¼ì¸ë“œ ë ˆí„°">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://blindletter.net">
  <meta property="og:description" content="ì „í•˜ê¸° ì–´ë ¤ìš´ ë§, ì´ì œ ìµëª…ìœ¼ë¡œ ì†Œí†µí•˜ì„¸ìš”.">
  <meta property="og:image" content="http://blindletter.net/static/images/ogimage.png">
  <meta property="og:image:alt" content="ë¸”ë¼ì¸ë“œ ë ˆí„° - ì „í•˜ê¸° ì–´ë ¤ìš´ ë§, ì´ì œ ìµëª…ìœ¼ë¡œ ì†Œí†µí•˜ì„¸ìš”.">
  <meta property="og:image:width" content="672">
  <meta property="og:image:height" content="400">

  <link id="favicon" type="image/x-icon" rel="shortcut icon" href="/favicon.ico">

  <link href="../static/styles/preview.css" rel="stylesheet">
  <script type="text/javascript" src="../static/scripts/base.js"></script>

  <script>
    var urlParams = getUrlParams();

    if (urlParams.id === undefined || urlParams.id.length === 0) {
      alert('ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.');
      window.history.back();

      throw Error('ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.');
    }
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162011414-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-162011414-1');
  </script>
</head>
<body>
<form class="container" method="get" action="../send/">
  <input type="hidden" name="id"/>
  <header>
    <h1>ë¸”ë¼ì¸ë“œ ë ˆí„°ì—ì„œ ë³´ë‚´ì§„<br>ìµëª…ì˜ ë©”ì‹œì§€ ğŸ‘€</h1>
  </header>
  <article class="banner">
    <section class="form">
      <div class="banner">
        <span class="js_preview_message"></span>
      </div>
    </section>
  </article>
  <footer>
    <button>ì „ì²´ë³´ê¸°</button>
  </footer>
</form>

<script>
  var comments = {};
  var getCommentIdAPIUrl = convertToCorsUrl('https://ou2lgi5d9l.execute-api.ap-northeast-2.amazonaws.com/default/comment');
  document.querySelector('[name=id]').value = urlParams.id;

  var r = new XMLHttpRequest();
  r.open('GET', getCommentIdAPIUrl + '?id=' + urlParams.id, true);
  r.onreadystatechange = function () {
    if (r.readyState !== 4 || r.status !== 200) return;
    var response = JSON.parse(r.responseText);

    if (response.message === 'success') {
      comments = response.content.comments[0];

      var original_message = comments.text;
      var el_preview_message = document.querySelector('.js_preview_message');

      el_preview_message.innerText = 'â€œ' + decodeURI(original_message).slice(0, 5) + '...â€';

      setLoaded();
    }
  };
  r.send();
</script>
</body>
</html>